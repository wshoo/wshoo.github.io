<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta name="generator" content="Hugo 0.58.3" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>wshoo的博客 | 爬虫，数据分析，电影迷，不爱看书，取巧，自闭男孩，好奇探索</title>
    <meta property="og:title" content="wshoo的博客 | 爬虫，数据分析，电影迷，不爱看书，取巧，自闭男孩，好奇探索">
    <meta property="og:type" content="website">
    <meta name="Keywords" content="python,数据分析,博客,电影,vlog">
    <meta name="description" content="">
    <meta property="og:url" content="https://wshoo.github.io/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="/css/normalize.css">
    
    <link rel="stylesheet" href="/css/style.css">
    <link rel="alternate" type="application/rss+xml+xml" href="https://wshoo.github.io/index.xml" title="wshoo的博客" />
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    


    
    
</head>


<body>
<header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <h1>
                        <a id="logo" href="https://wshoo.github.io/">
                            wshoo的博客
                        </a>
                    </h1>
                
                <p class="description">爬虫，数据分析，电影迷，不爱看书，取巧，自闭男孩，好奇探索</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://wshoo.github.io/">首页</a>
                    
                    <a  href="https://wshoo.github.io/archives/" title="归档">归档</a>
                    
                    <a  href="https://wshoo.github.io/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>


<div id="body">
    <div class="container">
        <div class="col-group">

            <div class="col-8" id="main">
                <div class="res-cons">
                    
		    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://wshoo.github.io/post/%E5%B0%86%E8%BF%9B%E9%85%92/" title="将进酒" >将进酒</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2019年10月18日
                            </date>
                            
                            <div class="post-meta">
                                <span>|</span>
                                
                                <span class="meta-category"><a href="https://wshoo.github.io/categories/%E8%AF%97%E6%AD%8C">诗歌</a></span>
                                
                            </div>
                            
                            <div class="post-content">
                                君不见，黄河之水天上来，奔流到海不复回。
君不见，高堂明镜悲白发，朝如青丝暮成雪。
人生得意须尽欢，莫使金樽空对月。
天生我材必有用，千金散尽还复来。
烹羊宰牛且为乐，会须一饮三百杯。
岑夫子，丹丘生，将进酒，杯莫停。
与君歌一曲，请君为我倾耳听。(倾耳听 一作：侧耳听)
钟鼓馔玉不足贵，但愿长醉不复醒。(不足贵 一作：何足贵；不复醒 一作：不愿醒/不用醒)
古来圣贤皆寂寞，惟有饮者留其名。(古来 一作：自古；惟 通：唯)
陈王昔时宴平乐，斗酒十千恣欢谑。
主人何为言少钱，径须沽取对君酌。
五花马，千金裘，呼儿将出换美酒，与尔同销万古愁。……
                            </div>
                            <p class="readmore"><a href="https://wshoo.github.io/post/%E5%B0%86%E8%BF%9B%E9%85%92/">阅读全文</a></p>
                        </article>
                    
                    
		    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://wshoo.github.io/post/%E5%A3%B0%E5%A3%B0%E6%85%A2/" title="声声慢" >声声慢</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2019年10月18日
                            </date>
                            
                            <div class="post-meta">
                                <span>|</span>
                                
                                <span class="meta-category"><a href="https://wshoo.github.io/categories/%E8%AF%97%E6%AD%8C">诗歌</a></span>
                                
                            </div>
                            
                            <div class="post-content">
                                碧云天，黄花地，落叶满地堆积， 雁飞过，离人泣，相思无奈亦难寄。
人消瘦，心相系，红豆遍生知君意， 遥相望，痴情迷，君未落泪浸满地，怎奈何点点滴滴。……
                            </div>
                            <p class="readmore"><a href="https://wshoo.github.io/post/%E5%A3%B0%E5%A3%B0%E6%85%A2/">阅读全文</a></p>
                        </article>
                    
                    
		    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://wshoo.github.io/about/" title="关于我" >关于我</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2019年10月16日
                            </date>
                            
                            <div class="post-content">
                                +++ 一个平凡的人 +++……
                            </div>
                            <p class="readmore"><a href="https://wshoo.github.io/about/">阅读全文</a></p>
                        </article>
                    
                    
		    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://wshoo.github.io/post/linkextractor/" title="scrapy 中的 LinkExtractor" >scrapy 中的 LinkExtractor</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2018年11月18日
                            </date>
                            
                            <div class="post-meta">
                                <span>|</span>
                                
                                <span class="meta-category"><a href="https://wshoo.github.io/categories/python">python</a></span>
                                
                            </div>
                            
                            <div class="post-content">
                                LinkExtractor 作用 提取链接
用法实例 from scrapy.linkextractors import LinkExtractor def parse(self, response): le = LinkExtractor(resttrict_xpath='//ul') links = le.extract_links(response) if links: next_url = link[0].url yiled scrapy.Request(next_url, callback=self.parse)  LinkExtractor参数  allow 接收一个正则表达式或正则式列表 deny 与allow相反
pattern = '/intro/.+\.html$' le = LinkExtractor(allow=pattern)  allow_domains 接收一个域名或一个域名列表
 deny_domains 与allow_domains相反
domains = ['github.com', 'google.com'] le = LinkExtractor(allow_domains=domains)  restrict_xpaths 接收一个XPath表达式或一个XPath表达式列表
 restrict_css 接收一个CSS选择器或一个CSS选择器列表
le = LinkExtractor(restrict_xpaths='//div[@id=&quot;top&quot;]')  tags 接收一个标签（字符串）或一个标签列表
 attrs 接收一个属性（字符串）或一个属性列表
le = LinkExtractor(tags='img', attrs='src')  process_value 接收一个形如func(value)的回调函数。如果传递了该参数，LinkExtractor将调用该回调函数对提取的每一个链接（如a的href）进行处理， 回调函数正常情况下应返回一个字符串（处理结果），想要抛弃所处理的链接时，返回None。……
                            </div>
                            <p class="readmore"><a href="https://wshoo.github.io/post/linkextractor/">阅读全文</a></p>
                        </article>
                    
                    
		    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://wshoo.github.io/post/mysql/" title="MySQL 常用语句" >MySQL 常用语句</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2018年10月28日
                            </date>
                            
                            <div class="post-meta">
                                <span>|</span>
                                
                                <span class="meta-category"><a href="https://wshoo.github.io/categories/database">database</a></span>
                                
                            </div>
                            
                            <div class="post-content">
                                MySQL：众多关系型数据库中的一种 修改mysql默认密码 使用 sudo mysql -u root -p 登录，密码为空
use mysql; update user set authentication_string=PASSWORD(&quot;这里输入你要改的密码&quot;) where User='root'; #更改密码 update user set plugin=&quot;mysql_native_password&quot;; #如果没这一行可能也会报一个错误，因此需要运行这一行 flush privileges; #更新所有操作权限 quit;  数据库操作：  进入mysql 命令行: mysql -uroot -p 查看所有数据库: show databases; 创建数据库： create database niu charset utf8; 删除数据库： drop database niu; 选择数据库： use databases; 查看所有表： show tables; 查看创建数据库的语句：show create database databasename; 查看创建表的语句：show create table tablename; 查看表结构：desc tablename;  表操作： 约束  自增长 auto_increment 非空 not null 默认值 default &lsquo;xx&rsquo; 唯一 unique 指定字符集 charset 主键 primary key 外键 增加两个表之间的联系  增：  学生表……
                            </div>
                            <p class="readmore"><a href="https://wshoo.github.io/post/mysql/">阅读全文</a></p>
                        </article>
                    
                    
		    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://wshoo.github.io/post/markdown/" title="markdown 语法" >markdown 语法</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2018年10月19日
                            </date>
                            
                            <div class="post-meta">
                                <span>|</span>
                                
                                <span class="meta-category"><a href="https://wshoo.github.io/categories/tool">tool</a></span>
                                
                            </div>
                            
                            <div class="post-content">
                                关于Markdown Markdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式
优点  简单标记符完成排版，所写即所见，让你专注于文字而不是排版 纯文本，所以兼容性极强，可以用所有文本编辑器打开
 格式转换方便，Markdown文本可以轻松转换为 html、pdf等
 Markdown 的标记语法有极好的可读性  Markdown简单语法示例 段落和换行  一个段落由一个或多个连续的文本行组成，它的前后要有一 个以上的空行
 通过在段位敲两个空格再回车实现换行
标题 标题能显示出文章的结构。行首插入1-6个 # ，每增加一个 # 表示更深入层次的内容，对应到标题的深度由 1-6 阶
# 这是H1
## 这是H2
### 这是H3
...
###### 这是H6
列表 列表就是将内容分为几个小点通过在前面打一个‘-’，或者‘+’实现
 1
 2
 3
有序列表则用数字接着几个英文句点，作用在于：你可以将它们的顺序打乱，而输出时会按照顺序输出
引用 在行首加‘&gt;’实现 例：
&gt; 苟利国家生死以，岂因祸福避趋之 &mdash;林则徐
  代码区块 通过 代码（键盘Esc键下方的符号）实现 例：
print('Helloworld')
分割线 通过连用三个以上‘×××’来实现
强调 使用‘×’或‘—’将要强调的内容包围
em
** strong **
插入图片和链接  一个惊叹号 ！ 接着一个方括号[],里面放图片的替代文字 接着一个普通括号（），里面放图片的网址……
                            </div>
                            <p class="readmore"><a href="https://wshoo.github.io/post/markdown/">阅读全文</a></p>
                        </article>
                    
                    
		    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://wshoo.github.io/post/git/" title="git 基本使用" >git 基本使用</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2018年10月18日
                            </date>
                            
                            <div class="post-meta">
                                <span>|</span>
                                
                                <span class="meta-category"><a href="https://wshoo.github.io/categories/tool">tool</a></span>
                                
                            </div>
                            
                            <div class="post-content">
                                简介 git是世界上最先进的分布式版本控制系统
- 集中式版本控制系统：版本库是集中存放在中央服务器，而干活的时候用的都是自己的电脑，所以要先从中央服务器取得最新的版本，然后开始工作，完成之后再推送到服务器。必须联网才能工作
- 分布式版本控制系统：每个人的电脑上都有一个完整的版本库，这样工作的时候就不需要联网了
安装git 环境：ubuntu16.04
- 打开终端，运行
sudo apt-get install git
- 安装完成后，设置你的email和name
git config --global user.name &quot;your name&quot;
git config --global user.email &quot;your email&quot;
git config --global color.ui true ＃使git带有颜色　 设置命令别名　  git config --global alias.co checkout
git config --global alias.ci commit git config --global alias.br branch
创建版本库 版本库（repository）:可以理解为一个目录，目录下所有的文件都可以被git管理起来，每个文件的修改删除，git都能追踪，或者在将来的某个时刻还原
mkdir gitexample
cd gitexample
git init # 目录下多了.git文件夹
添加文件到版本库  将文件放在gitexample目录下
 运行git add filename # 添加到缓存区(可多次运行) 运行git commit -m &quot;&quot; # -m后是本次提交的说明……
                            </div>
                            <p class="readmore"><a href="https://wshoo.github.io/post/git/">阅读全文</a></p>
                        </article>
                    
                    
		    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://wshoo.github.io/post/python%E6%A8%A1%E5%9D%97-multiprocessing/" title="Multiprocessing 模块" >Multiprocessing 模块</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                1年1月1日
                            </date>
                            
                            <div class="post-meta">
                                <span>|</span>
                                
                                <span class="meta-category"><a href="https://wshoo.github.io/categories/python">python</a></span>
                                
                            </div>
                            
                            <div class="post-content">
                                众所周知，Python中的GIL限制了Python多线程并行对多核CPU的利用，但是我们仍然可以通过各种其他的方式来让Python真正利用多核资源, 例如通过C/C++扩展来实现多线程/多进程, 以及直接利用Python的多进程模块multiprocessing来进行多进程编程。
 多进程 Multiprocessing 模块 Process 类 Process 类用来描述一个进程对象。创建子进程的时候，只需要传入一个执行函数和函数的参数即可完成 Process 示例的创建。
multiprocessing.Process(group=None, target=None, name=None, args=(), kwargs={}, *, daemon=None) # target -- 函数名 # args -- tuple形式参数   star() 启动进程 join() 进程同步，等待所有进程退出 close() 阻止多余的进程涌入进程池pool造成进程阻塞  eg.
import multiprocessing import os def run_proc(name): print('Child process {0} PID:{1}'.format(name, os.getpid())) # os.getpid() 获取当前进程pid if __name__ == '__main__': print('Parent process {0} is Running'.format(os.getpid())) for i in range(5): p = multiprocessing.Process(target=run_proc, args=(str(i),)) print('process start') p.……
                            </div>
                            <p class="readmore"><a href="https://wshoo.github.io/post/python%E6%A8%A1%E5%9D%97-multiprocessing/">阅读全文</a></p>
                        </article>
                    
                    
		    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://wshoo.github.io/post/python-db/" title="python 数据库实例" >python 数据库实例</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                1年1月1日
                            </date>
                            
                            <div class="post-meta">
                                <span>|</span>
                                
                                <span class="meta-category"><a href="https://wshoo.github.io/categories/python">python</a></span>
                                
                            </div>
                            
                            <div class="post-content">
                                python 数据库交互 MySQL MySQL 的安装
 sudo apt-get update sudo apt-get install -y mysql-server mysql-client  远程访问
 sudo nano /etc/mysql/my.cnf 注释此行：bind-address = 127.0.0.1  启动、关闭和重启MySQL 服务的命令如下： - sudo service mysql start - sudo service mysql stop - sudo service mysql restart
可视化工具 ：MySQL workbench
import pymysql def my_db(host,user,passwd,db,sql,port=3306,charset='utf8'): coon = pymysql.connect(host=host, user=user, password=passwd, db=db, port=port, charset=charset, autocommit=True) cur = coon.cursor() #建立游标 sql=sql.strip() cur.execute(sql) #执行sql语句，但不会返回执行的结果 sql_start = sql[:6].lower()#取sql的开头,转成小写 if sql_start.……
                            </div>
                            <p class="readmore"><a href="https://wshoo.github.io/post/python-db/">阅读全文</a></p>
                        </article>
                    
                    
		    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://wshoo.github.io/post/scrapy_proxy/" title="scrapy--proxy代理" >scrapy--proxy代理</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                1年1月1日
                            </date>
                            
                            <div class="post-meta">
                                <span>|</span>
                                
                                <span class="meta-category"><a href="https://wshoo.github.io/categories/scrapy">scrapy</a></span>
                                
                            </div>
                            
                            <div class="post-content">
                                scrapy&ndash;proxy代理的设置 在构造的请求中添加meta属性： 示例：
def start_requests(self): yield scrapy.FormRequest(url=self.start_urls[0], headers=self.header, formdata=self.data, callback=self.parse_page, meta={'proxy':'http://1.2.3.4:11'}, )  显然在有多个spider时这种方法不够灵活
以中间件的形式添加 在middlewares.py中添加：
import random, base64 class ProxyMiddleware(object): proxyList = ['36.250.69.4:80', '58.18.52.168:3128', '58.253.238.243:80', '60.191.164.22:3128', '60.191.167.93:3128'] def process_request(self, request, spider): # Set the location of the proxy pro_adr = random.choice(self.proxyList) print(&quot;USE PROXY -&gt; &quot;+pro_adr) request.meta['proxy'] = &quot;http://&quot;+ pro_adr '''这里用的免费代理,不用用户名密码的.如果有用户名和密码,还要加入以下代码 proxy_user_pass = &quot;USERNAME:PASSWORD&quot; encoded_user_pass = base64.encodestring(proxy_user_pass) request.headers['Proxy-Authorization'] = 'Basic ' + encoded_user_pass'''  settings.py:
DOWNLOADER_MIDDLEWARES = { #项目名称改成自己的 'pro_name.……
                            </div>
                            <p class="readmore"><a href="https://wshoo.github.io/post/scrapy_proxy/">阅读全文</a></p>
                        </article>
                    
                    
                    



<ol class="page-navigator">
    

    
    <li  class="current">
        <a href="https://wshoo.github.io/">1</a>
    </li>
    
    <li >
        <a href="https://wshoo.github.io/page/2/">2</a>
    </li>
    

    
    <li class="next">
        <a href="https://wshoo.github.io/page/2/">下一页</a>
    </li>
    
</ol>



                </div>
            </div>

            <div id="secondary">
    <section class="widget">
        <form id="search" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://wshoo.github.io/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://wshoo.github.io/post/%E5%B0%86%E8%BF%9B%E9%85%92/" title="将进酒">将进酒</a>
    </li>
    
    <li>
        <a href="https://wshoo.github.io/post/%E5%A3%B0%E5%A3%B0%E6%85%A2/" title="声声慢">声声慢</a>
    </li>
    
    <li>
        <a href="https://wshoo.github.io/post/linkextractor/" title="scrapy 中的 LinkExtractor">scrapy 中的 LinkExtractor</a>
    </li>
    
    <li>
        <a href="https://wshoo.github.io/post/mysql/" title="MySQL 常用语句">MySQL 常用语句</a>
    </li>
    
    <li>
        <a href="https://wshoo.github.io/post/markdown/" title="markdown 语法">markdown 语法</a>
    </li>
    
    <li>
        <a href="https://wshoo.github.io/post/git/" title="git 基本使用">git 基本使用</a>
    </li>
    
    <li>
        <a href="https://wshoo.github.io/post/python%E6%A8%A1%E5%9D%97-multiprocessing/" title="Multiprocessing 模块">Multiprocessing 模块</a>
    </li>
    
    <li>
        <a href="https://wshoo.github.io/post/python-db/" title="python 数据库实例">python 数据库实例</a>
    </li>
    
    <li>
        <a href="https://wshoo.github.io/post/scrapy_proxy/" title="scrapy--proxy代理">scrapy--proxy代理</a>
    </li>
    
    <li>
        <a href="https://wshoo.github.io/post/scrapy_workflow/" title="scrapy--proxy代理">scrapy--proxy代理</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">分类</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://wshoo.github.io/categories/database/">database(1)</a>
    </li>
    
    <li>
        <a href="https://wshoo.github.io/categories/python/">python(5)</a>
    </li>
    
    <li>
        <a href="https://wshoo.github.io/categories/scrapy/">scrapy(3)</a>
    </li>
    
    <li>
        <a href="https://wshoo.github.io/categories/tool/">tool(2)</a>
    </li>
    
    <li>
        <a href="https://wshoo.github.io/categories/%E8%AF%97%E6%AD%8C/">诗歌(2)</a>
    </li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title">标签</h3>
<div class="tagcloud">
    
    <a href="https://wshoo.github.io/tags/git/">git</a>
    
    <a href="https://wshoo.github.io/tags/markdown/">markdown</a>
    
    <a href="https://wshoo.github.io/tags/mysql/">mysql</a>
    
    <a href="https://wshoo.github.io/tags/python/">python</a>
    
    <a href="https://wshoo.github.io/tags/scrapy/">scrapy</a>
    
    <a href="https://wshoo.github.io/tags/%E8%AF%97%E6%AD%8C/">诗歌</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://wshoo.github.io/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
        </div>
    </div>
</div>
<footer id="footer">
    <div class="container">
        &copy; 2019 <a href="https://wshoo.github.io/">wshoo的博客 By wshoo</a>.
        Powered by <a rel="nofollow noreferer noopener" href="https://gohugo.io" target="_blank">Hugo</a>.
        <a href="https://www.flysnow.org/" target="_blank">Theme</a> based on <a href="https://github.com/rujews/maupassant-hugo" target="_blank">maupassant</a>.
        
    </div>
</footer>



<a id="rocket" href="#top"></a>
<script type="text/javascript" src="/js/totop.js?v=0.0.0" async=""></script>







</body>
</html>
